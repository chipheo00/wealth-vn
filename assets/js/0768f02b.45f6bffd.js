"use strict";(self.webpackChunkwealthvn_docs=self.webpackChunkwealthvn_docs||[]).push([[3524],{8193(e,n,s){s.d(n,{R:()=>a,x:()=>l});var t=s(758);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},9892(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"development/vn-market/vn-market-api-specs","title":"Vn Market Api Specs","description":"This document contains the reverse-engineered API specifications extracted from the vnstock Python library for implementing native Rust clients.","source":"@site/docs/development/vn-market/vn-market-api-specs.md","sourceDirName":"development/vn-market","slug":"/development/vn-market/vn-market-api-specs","permalink":"/wealth-vn/docs/development/vn-market/vn-market-api-specs","draft":false,"unlisted":false,"editUrl":"https://github.com/chipheo00/vn-wealthfolio/tree/main/docs/docs/development/vn-market/vn-market-api-specs.md","tags":[],"version":"current","frontMatter":{"title":"Vn Market Api Specs"},"sidebar":"tutorialSidebar","previous":{"title":"VN Market Assets Synchronization","permalink":"/wealth-vn/docs/development/vn-market/vn-assets-synchronization"},"next":{"title":"UI Revamp Implementation Guide","permalink":"/wealth-vn/docs/development/ui-revamp-implementation"}}');var i=s(6070),r=s(8193);const a={title:"Vn Market Api Specs"},l="Vietnamese Market API Specifications",d={},c=[{value:"Overview",id:"overview",level:2},{value:"1. VCI (Vietcap) - Stocks &amp; Indices",id:"1-vci-vietcap---stocks--indices",level:2},{value:"1.1 Base Configuration",id:"11-base-configuration",level:3},{value:"1.2 Required Headers",id:"12-required-headers",level:3},{value:"1.3 Get All Symbols (Listing)",id:"13-get-all-symbols-listing",level:3},{value:"1.4 Get Historical OHLC Data",id:"14-get-historical-ohlc-data",level:3},{value:"1.5 Index Symbol Mapping",id:"15-index-symbol-mapping",level:3},{value:"2. FMarket - Mutual Funds",id:"2-fmarket---mutual-funds",level:2},{value:"2.1 Base Configuration",id:"21-base-configuration",level:3},{value:"2.2 Required Headers",id:"22-required-headers",level:3},{value:"2.3 Get Fund Listing",id:"23-get-fund-listing",level:3},{value:"2.4 Get Fund NAV History",id:"24-get-fund-nav-history",level:3},{value:"2.5 Get Fund Details",id:"25-get-fund-details",level:3},{value:"3. SJC - Gold Prices",id:"3-sjc---gold-prices",level:2},{value:"3.1 Base Configuration",id:"31-base-configuration",level:3},{value:"3.2 Required Headers",id:"32-required-headers",level:3},{value:"3.3 Get Gold Price by Date",id:"33-get-gold-price-by-date",level:3},{value:"4. Rate Limiting Recommendations",id:"4-rate-limiting-recommendations",level:2},{value:"5. Error Handling",id:"5-error-handling",level:2},{value:"Common Error Responses",id:"common-error-responses",level:3},{value:"6. Implementation Checklist",id:"6-implementation-checklist",level:2},{value:"Phase 1: Core HTTP Clients",id:"phase-1-core-http-clients",level:3},{value:"Phase 2: Data Models",id:"phase-2-data-models",level:3},{value:"Phase 3: Provider Implementation",id:"phase-3-provider-implementation",level:3},{value:"Phase 4: Integration",id:"phase-4-integration",level:3},{value:"7. Testing",id:"7-testing",level:2},{value:"Test Symbols",id:"test-symbols",level:3},{value:"Sample cURL Commands",id:"sample-curl-commands",level:3}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"vietnamese-market-api-specifications",children:"Vietnamese Market API Specifications"})}),"\n",(0,i.jsxs)(n.p,{children:["This document contains the reverse-engineered API specifications extracted from the ",(0,i.jsx)(n.code,{children:"vnstock"})," Python library for implementing native Rust clients."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Provider"}),(0,i.jsx)(n.th,{children:"Base URL"}),(0,i.jsx)(n.th,{children:"Data Type"}),(0,i.jsx)(n.th,{children:"Auth Required"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VCI (Vietcap)"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"https://trading.vietcap.com.vn/api/"})}),(0,i.jsx)(n.td,{children:"Stocks, Indices"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"FMarket"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"https://api.fmarket.vn/res/products"})}),(0,i.jsx)(n.td,{children:"Mutual Funds"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SJC"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"https://sjc.com.vn/GoldPrice/Services/PriceService.ashx"})}),(0,i.jsx)(n.td,{children:"Gold Prices"}),(0,i.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-vci-vietcap---stocks--indices",children:"1. VCI (Vietcap) - Stocks & Indices"}),"\n",(0,i.jsx)(n.h3,{id:"11-base-configuration",children:"1.1 Base Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Base URL: https://trading.vietcap.com.vn/api/\nGraphQL URL: https://trading.vietcap.com.vn/data-mt/graphql\n"})}),"\n",(0,i.jsx)(n.h3,{id:"12-required-headers",children:"1.2 Required Headers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'let headers = [\n    ("Accept", "application/json, text/plain, */*"),\n    ("Accept-Language", "en-US,en;q=0.9,vi-VN;q=0.8,vi;q=0.7"),\n    ("Content-Type", "application/json"),\n    ("Referer", "https://trading.vietcap.com.vn/"),\n    ("Origin", "https://trading.vietcap.com.vn/"),\n    ("User-Agent", "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 Chrome/120.0.0.0 Safari/537.36"),\n];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"13-get-all-symbols-listing",children:"1.3 Get All Symbols (Listing)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"GET /price/symbols/getAll"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": 1,\n    "symbol": "VNM",\n    "board": "HSX",  // Exchange: HSX, HNX, UPCOM\n    "type": "STOCK", // STOCK, ETF, BOND, etc.\n    "organName": "C\xf4ng ty C\u1ed5 ph\u1ea7n S\u1eefa Vi\u1ec7t Nam",\n    "organShortName": "Vinamilk",\n    "enOrganName": "Vietnam Dairy Products JSC",\n    "enOrganShortName": "Vinamilk"\n  }\n]\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rust Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'#[derive(Deserialize)]\n#[serde(rename_all = "camelCase")]\npub struct VciSymbol {\n    pub symbol: String,\n    pub board: String,       // HSX -> HOSE, HNX, UPCOM\n    #[serde(rename = "type")]\n    pub asset_type: String,\n    pub organ_name: String,\n    pub organ_short_name: Option<String>,\n}\n\nasync fn get_all_symbols(client: &Client) -> Result<Vec<VciSymbol>, Error> {\n    let url = "https://trading.vietcap.com.vn/api/price/symbols/getAll";\n    let response = client.get(url).headers(VCI_HEADERS).send().await?;\n    response.json().await\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"14-get-historical-ohlc-data",children:"1.4 Get Historical OHLC Data"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"POST /chart/OHLCChart/gap-chart"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "timeFrame": "ONE_DAY",   // ONE_MINUTE, ONE_HOUR, ONE_DAY\n  "symbols": ["VNM"],\n  "to": 1735689600,         // Unix timestamp (end date)\n  "countBack": 365          // Number of candles to fetch\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"TimeFrame Mapping:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'const INTERVAL_MAP: [(&str, &str); 6] = [\n    ("1m", "ONE_MINUTE"),\n    ("5m", "ONE_MINUTE"),   // Requires resampling\n    ("15m", "ONE_MINUTE"),  // Requires resampling\n    ("1H", "ONE_HOUR"),\n    ("1D", "ONE_DAY"),\n    ("1W", "ONE_DAY"),      // Requires resampling\n];\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "t": [1704067200, 1704153600, ...],  // Timestamps\n    "o": [85.5, 86.0, ...],              // Open prices (in 1000 VND)\n    "h": [86.2, 86.5, ...],              // High prices\n    "l": [85.0, 85.5, ...],              // Low prices\n    "c": [86.0, 86.2, ...],              // Close prices\n    "v": [1500000, 1200000, ...]         // Volume\n  }\n]\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u26a0\ufe0f IMPORTANT: Price values are in 1000 VND units. Multiply by 1000 to get actual VND."})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rust Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'#[derive(Serialize)]\n#[serde(rename_all = "camelCase")]\npub struct OhlcRequest {\n    pub time_frame: String,\n    pub symbols: Vec<String>,\n    pub to: i64,\n    pub count_back: i32,\n}\n\n#[derive(Deserialize)]\npub struct OhlcResponse {\n    pub t: Vec<i64>,   // timestamps\n    pub o: Vec<f64>,   // open (multiply by 1000)\n    pub h: Vec<f64>,   // high\n    pub l: Vec<f64>,   // low\n    pub c: Vec<f64>,   // close\n    pub v: Vec<i64>,   // volume\n}\n\nasync fn get_stock_history(\n    client: &Client, \n    symbol: &str, \n    start: DateTime<Utc>, \n    end: DateTime<Utc>\n) -> Result<Vec<Quote>, Error> {\n    let url = "https://trading.vietcap.com.vn/api/chart/OHLCChart/gap-chart";\n    let end_timestamp = end.timestamp();\n    let days = (end - start).num_days() + 1;\n    \n    let payload = OhlcRequest {\n        time_frame: "ONE_DAY".to_string(),\n        symbols: vec![symbol.to_string()],\n        to: end_timestamp,\n        count_back: days as i32,\n    };\n    \n    let response = client\n        .post(url)\n        .headers(VCI_HEADERS)\n        .json(&payload)\n        .send()\n        .await?;\n    \n    let data: Vec<OhlcResponse> = response.json().await?;\n    // Transform and multiply prices by 1000\n    // ...\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"15-index-symbol-mapping",children:"1.5 Index Symbol Mapping"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'const INDEX_MAPPING: [(&str, &str); 3] = [\n    ("VNINDEX", "VNINDEX"),\n    ("HNXINDEX", "HNXIndex"),\n    ("UPCOMINDEX", "HNXUpcomIndex"),\n];\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-fmarket---mutual-funds",children:"2. FMarket - Mutual Funds"}),"\n",(0,i.jsx)(n.h3,{id:"21-base-configuration",children:"2.1 Base Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Base URL: https://api.fmarket.vn/res/products\n"})}),"\n",(0,i.jsx)(n.h3,{id:"22-required-headers",children:"2.2 Required Headers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'let headers = [\n    ("Accept", "application/json, text/plain, */*"),\n    ("Content-Type", "application/json"),\n    ("Referer", "https://fmarket.vn/"),\n    ("Origin", "https://fmarket.vn/"),\n    ("User-Agent", "Mozilla/5.0 ..."),\n];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"23-get-fund-listing",children:"2.3 Get Fund Listing"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"POST /filter"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "types": ["NEW_FUND", "TRADING_FUND"],\n  "issuerIds": [],\n  "sortOrder": "DESC",\n  "sortField": "navTo6Months",\n  "page": 1,\n  "pageSize": 100,\n  "isIpo": false,\n  "fundAssetTypes": [],       // [], ["BALANCED"], ["BOND"], ["STOCK"]\n  "bondRemainPeriods": [],\n  "searchField": "",\n  "isBuyByReward": false,\n  "thirdAppIds": []\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "total": 50,\n    "rows": [\n      {\n        "id": 23,\n        "shortName": "VESAF",\n        "name": "Qu\u1ef9 \u0110\u1ea7u t\u01b0 C\u1ed5 phi\u1ebfu Vi\u1ec7t Nam",\n        "code": "VESAFUND",\n        "dataFundAssetType": { "name": "STOCK" },\n        "owner": { "name": "VinaCapital" },\n        "nav": 25000.5,\n        "firstIssueAt": 1609459200000,  // Unix ms\n        "productNavChange": {\n          "navToPrevious": 0.5,\n          "navTo1Months": 2.3,\n          "navTo3Months": 5.1,\n          "navTo6Months": 8.7,\n          "navTo12Months": 15.2,\n          "updateAt": 1704067200000\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rust Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'#[derive(Serialize)]\n#[serde(rename_all = "camelCase")]\npub struct FundFilterRequest {\n    pub types: Vec<String>,\n    pub page: i32,\n    pub page_size: i32,\n    pub search_field: String,\n    // ... other fields\n}\n\n#[derive(Deserialize)]\n#[serde(rename_all = "camelCase")]\npub struct FundInfo {\n    pub id: i32,\n    pub short_name: String,\n    pub name: String,\n    pub nav: Option<f64>,\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"24-get-fund-nav-history",children:"2.4 Get Fund NAV History"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"POST /product/get-nav-history"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "isAllData": 0,           // 0 = use date range, 1 = all data\n  "productId": 23,          // Fund ID from listing\n  "fromDate": "20240101",   // YYYYMMDD format\n  "toDate": "20241231"      // YYYYMMDD format\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "navDate": "2024-01-15",\n      "nav": 25100.5\n    },\n    {\n      "navDate": "2024-01-16", \n      "nav": 25150.0\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rust Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'#[derive(Serialize)]\n#[serde(rename_all = "camelCase")]\npub struct NavHistoryRequest {\n    pub is_all_data: i32,\n    pub product_id: i32,\n    pub from_date: String,  // YYYYMMDD\n    pub to_date: String,    // YYYYMMDD\n}\n\n#[derive(Deserialize)]\n#[serde(rename_all = "camelCase")]\npub struct NavRecord {\n    pub nav_date: String,\n    pub nav: f64,\n}\n\nasync fn get_fund_nav_history(\n    client: &Client,\n    fund_id: i32,\n    start: &str,  // YYYY-MM-DD\n    end: &str\n) -> Result<Vec<NavRecord>, Error> {\n    let url = "https://api.fmarket.vn/res/product/get-nav-history";\n    \n    let payload = NavHistoryRequest {\n        is_all_data: 0,\n        product_id: fund_id,\n        from_date: start.replace("-", ""),\n        to_date: end.replace("-", ""),\n    };\n    \n    let response = client.post(url).json(&payload).send().await?;\n    let result: ApiResponse<Vec<NavRecord>> = response.json().await?;\n    Ok(result.data)\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"25-get-fund-details",children:"2.5 Get Fund Details"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"GET /{fundId}"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response:"})," Contains top holdings, industry allocation, asset holdings."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-sjc---gold-prices",children:"3. SJC - Gold Prices"}),"\n",(0,i.jsx)(n.h3,{id:"31-base-configuration",children:"3.1 Base Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"URL: https://sjc.com.vn/GoldPrice/Services/PriceService.ashx\nData Available: From 2016-01-02\n"})}),"\n",(0,i.jsx)(n.h3,{id:"32-required-headers",children:"3.2 Required Headers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'let headers = [\n    ("Content-Type", "application/x-www-form-urlencoded"),\n    ("Referer", "https://sjc.com.vn/bieu-do-gia-vang"),\n    ("Origin", "https://sjc.com.vn"),\n    ("User-Agent", "Mozilla/5.0 ..."),\n];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"33-get-gold-price-by-date",children:"3.3 Get Gold Price by Date"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint:"})," ",(0,i.jsx)(n.code,{children:"POST /"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body (form-urlencoded):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"method=GetSJCGoldPriceByDate&toDate=15/01/2024\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Date format:"})," ",(0,i.jsx)(n.code,{children:"DD/MM/YYYY"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "data": [\n    {\n      "TypeName": "V\xe0ng mi\u1ebfng SJC",\n      "BranchName": "H\u1ed3 Ch\xed Minh",\n      "BuyValue": 79500000,\n      "SellValue": 81500000\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rust Implementation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'#[derive(Deserialize)]\npub struct SjcResponse {\n    pub success: bool,\n    pub data: Vec<SjcGoldPrice>,\n}\n\n#[derive(Deserialize)]\n#[serde(rename_all = "PascalCase")]\npub struct SjcGoldPrice {\n    pub type_name: String,\n    pub branch_name: String,\n    pub buy_value: f64,\n    pub sell_value: f64,\n}\n\nasync fn get_sjc_gold_price(client: &Client, date: NaiveDate) -> Result<SjcGoldPrice, Error> {\n    let url = "https://sjc.com.vn/GoldPrice/Services/PriceService.ashx";\n    let date_str = date.format("%d/%m/%Y").to_string();\n    let body = format!("method=GetSJCGoldPriceByDate&toDate={}", date_str);\n    \n    let response = client\n        .post(url)\n        .headers(SJC_HEADERS)\n        .body(body)\n        .send()\n        .await?;\n    \n    let result: SjcResponse = response.json().await?;\n    \n    if !result.success || result.data.is_empty() {\n        return Err(Error::NoData);\n    }\n    \n    // Return first item (usually SJC standard gold bar)\n    Ok(result.data.into_iter().next().unwrap())\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-rate-limiting-recommendations",children:"4. Rate Limiting Recommendations"}),"\n",(0,i.jsx)(n.p,{children:"Based on the Python implementation analysis:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Provider"}),(0,i.jsx)(n.th,{children:"Recommended Rate"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VCI"}),(0,i.jsx)(n.td,{children:"10 req/sec"}),(0,i.jsx)(n.td,{children:"Can handle burst"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"FMarket"}),(0,i.jsx)(n.td,{children:"5 req/sec"}),(0,i.jsx)(n.td,{children:"More conservative"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SJC"}),(0,i.jsx)(n.td,{children:"2 req/sec"}),(0,i.jsx)(n.td,{children:"Historical data fetched day-by-day"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-error-handling",children:"5. Error Handling"}),"\n",(0,i.jsx)(n.h3,{id:"common-error-responses",children:"Common Error Responses"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"pub enum MarketDataError {\n    // Network errors\n    ConnectionError(String),\n    Timeout,\n    \n    // API errors\n    RateLimited,\n    InvalidSymbol(String),\n    NoDataAvailable,\n    \n    // Parse errors\n    InvalidResponse(String),\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6-implementation-checklist",children:"6. Implementation Checklist"}),"\n",(0,i.jsx)(n.h3,{id:"phase-1-core-http-clients",children:"Phase 1: Core HTTP Clients"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Create ",(0,i.jsx)(n.code,{children:"VciClient"})," with authentication headers"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Create ",(0,i.jsx)(n.code,{children:"FMarketClient"})," with authentication headers"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Create ",(0,i.jsx)(n.code,{children:"SjcClient"})," with authentication headers"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Add rate limiting layer"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"phase-2-data-models",children:"Phase 2: Data Models"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Port ",(0,i.jsx)(n.code,{children:"VnMarketQuote"})," struct (already exists)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Add ",(0,i.jsx)(n.code,{children:"VnFundInfo"})," struct"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Add ",(0,i.jsx)(n.code,{children:"VnGoldPrice"})," struct"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"phase-3-provider-implementation",children:"Phase 3: Provider Implementation"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Implement ",(0,i.jsx)(n.code,{children:"get_stock_history()"})," for VCI"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Implement ",(0,i.jsx)(n.code,{children:"get_fund_nav_history()"})," for FMarket"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Implement ",(0,i.jsx)(n.code,{children:"get_gold_history()"})," for SJC"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Add caching layer"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"phase-4-integration",children:"Phase 4: Integration"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Update existing ",(0,i.jsx)(n.code,{children:"VnMarketProvider"})," to use new clients"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Add health check endpoints"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Add background refresh tasks"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7-testing",children:"7. Testing"}),"\n",(0,i.jsx)(n.h3,{id:"test-symbols",children:"Test Symbols"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Symbol"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Stock"}),(0,i.jsx)(n.td,{children:"VNM"}),(0,i.jsx)(n.td,{children:"Blue chip, high liquidity"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Stock"}),(0,i.jsx)(n.td,{children:"FPT"}),(0,i.jsx)(n.td,{children:"Tech sector"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Index"}),(0,i.jsx)(n.td,{children:"VNINDEX"}),(0,i.jsx)(n.td,{children:"Main index"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Fund"}),(0,i.jsx)(n.td,{children:"VESAF"}),(0,i.jsx)(n.td,{children:"VinaCapital stock fund"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Fund"}),(0,i.jsx)(n.td,{children:"TCBF"}),(0,i.jsx)(n.td,{children:"TCB bond fund"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Gold"}),(0,i.jsx)(n.td,{children:"VN.GOLD"}),(0,i.jsx)(n.td,{children:"SJC gold bar"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"sample-curl-commands",children:"Sample cURL Commands"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Get Stock History:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'https://trading.vietcap.com.vn/api/chart/OHLCChart/gap-chart\' \\\n  -H \'Content-Type: application/json\' \\\n  -H \'Referer: https://trading.vietcap.com.vn/\' \\\n  -d \'{"timeFrame":"ONE_DAY","symbols":["VNM"],"to":1735689600,"countBack":30}\'\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Get Fund Listing:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'https://api.fmarket.vn/res/products/filter\' \\\n  -H \'Content-Type: application/json\' \\\n  -H \'Referer: https://fmarket.vn/\' \\\n  -d \'{"types":["NEW_FUND","TRADING_FUND"],"page":1,"pageSize":100}\'\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Get Gold Price:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X POST 'https://sjc.com.vn/GoldPrice/Services/PriceService.ashx' \\\n  -H 'Content-Type: application/x-www-form-urlencoded' \\\n  -H 'Referer: https://sjc.com.vn/bieu-do-gia-vang' \\\n  -d 'method=GetSJCGoldPriceByDate&toDate=15/01/2024'\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Document generated from vnstock v3.3.0 source code analysis"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);